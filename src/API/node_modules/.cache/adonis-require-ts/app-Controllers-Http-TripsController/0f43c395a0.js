"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Trip_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Trip"));
class TripsController {
    async index() {
        const trip = await Trip_1.default.query()
            .preload("typTrip")
            .preload("tripPrice")
            .preload("users", (query) => {
            query.pivotColumns(['number_of_person']);
        });
        console.log("Daaa");
        return trip;
    }
    async store({ request, response }) {
        const body = request.body();
        const trip = await Trip_1.default.create(body);
        response.status(201);
        return trip;
    }
    async tripShow({ params }) {
        return Trip_1.default.findOrFail(params.id);
    }
    async tripUserShow({ params }) {
        const trip = Trip_1.default.findOrFail(params.id);
        return (await trip).$getRelated('Users');
    }
}
exports.default = TripsController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJpcHNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVHJpcHNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsaUZBQWtDO0FBQ2xDLE1BQXFCLGVBQWU7SUFFekIsS0FBSyxDQUFDLEtBQUs7UUFDZCxNQUFNLElBQUksR0FBRyxNQUFNLGNBQUksQ0FBQyxLQUFLLEVBQUU7YUFDMUIsT0FBTyxDQUFDLFNBQVMsQ0FBQzthQUNsQixPQUFPLENBQUMsV0FBVyxDQUFDO2FBQ3BCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUN4QixLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFBO1FBQzVDLENBQUMsQ0FBQyxDQUFBO1FBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUN2QixPQUFPLElBQUksQ0FBQTtJQUNmLENBQUM7SUFFTSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUMsT0FBTyxFQUFDLFFBQVEsRUFBcUI7UUFDckQsTUFBTSxJQUFJLEdBQUUsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFBO1FBQzFCLE1BQU0sSUFBSSxHQUFHLE1BQU8sY0FBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNyQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3BCLE9BQU8sSUFBSSxDQUFBO0lBQ2YsQ0FBQztJQUVNLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBQyxNQUFNLEVBQXNCO1FBQy9DLE9BQU8sY0FBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVNLEtBQUssQ0FBQyxZQUFZLENBQUMsRUFBQyxNQUFNLEVBQXNCO1FBQ25ELE1BQU0sSUFBSSxHQUFJLGNBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3pDLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUU3QyxDQUFDO0NBQ0o7QUE3QkQsa0NBNkJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBIdHRwQ29udGV4dENvbnRyYWN0IH0gZnJvbSAnQGlvYzpBZG9uaXMvQ29yZS9IdHRwQ29udGV4dCdcbmltcG9ydCBUcmlwIGZyb20gJ0FwcC9Nb2RlbHMvVHJpcCdcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyaXBzQ29udHJvbGxlciB7XG5cbiAgICBwdWJsaWMgYXN5bmMgaW5kZXgoKXtcbiAgICAgICAgY29uc3QgdHJpcCA9IGF3YWl0IFRyaXAucXVlcnkoKVxuICAgICAgICAgICAgLnByZWxvYWQoXCJ0eXBUcmlwXCIpXG4gICAgICAgICAgICAucHJlbG9hZChcInRyaXBQcmljZVwiKVxuICAgICAgICAgICAgLnByZWxvYWQoXCJ1c2Vyc1wiLCAocXVlcnkpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeS5waXZvdENvbHVtbnMoWydudW1iZXJfb2ZfcGVyc29uJ10pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEYWFhXCIpXG4gICAgICAgIHJldHVybiB0cmlwXG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHN0b3JlKHtyZXF1ZXN0LHJlc3BvbnNlfTpIdHRwQ29udGV4dENvbnRyYWN0KXtcbiAgICAgICAgY29uc3QgYm9keSA9cmVxdWVzdC5ib2R5KClcbiAgICAgICAgY29uc3QgdHJpcCA9IGF3YWl0ICBUcmlwLmNyZWF0ZShib2R5KVxuICAgICAgICByZXNwb25zZS5zdGF0dXMoMjAxKVxuICAgICAgICByZXR1cm4gdHJpcFxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyB0cmlwU2hvdyh7cGFyYW1zfTogSHR0cENvbnRleHRDb250cmFjdCl7XG4gICAgICAgIHJldHVybiBUcmlwLmZpbmRPckZhaWwocGFyYW1zLmlkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgdHJpcFVzZXJTaG93KHtwYXJhbXN9OiBIdHRwQ29udGV4dENvbnRyYWN0KXtcbiAgICAgICAgY29uc3QgdHJpcCAgPSBUcmlwLmZpbmRPckZhaWwocGFyYW1zLmlkKTtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0cmlwKS4kZ2V0UmVsYXRlZCgnVXNlcnMnKTtcbiAgICAgICAgXG4gICAgfVxufVxuIl19